{
  "title": "`const`, `struct`s, and C-Style ADTs",
  "mk_intructions": "\n<link rel=\"icon\" type=\"image/png\" href=\"/eecs280-async-lectures/favicon-96x96.png\" sizes=\"96x96\" />\n<link rel=\"icon\" type=\"image/svg+xml\" href=\"/eecs280-async-lectures/favicon.svg\" />\n<link rel=\"shortcut icon\" href=\"/eecs280-async-lectures/favicon.ico\" />\n<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/eecs280-async-lectures/apple-touch-icon.png\" />\n<meta name=\"apple-mobile-web-app-title\" content=\"Async Lecs\" />\n<link rel=\"manifest\" href=\"/eecs280-async-lectures/site.webmanifest\" />\n<div markdown=1 class=\"alert alert-info\">\n  As we start to work with larger, more complex programs, abstraction helps manage that complexity. We've already discussed *procedural abstraction*, i.e. using functions to break down the flow of our program into manageable sub-tasks.\n    \n  Today, we'll introduce **Abstract Data Types (ADTs)**, which serve as a combined abstraction for data and the functions that operate on that data.\n\n  Specifically, we'll define some conventions for ADTs as they could be implemented in the C language (which is both the precursor to C++ and also a contemporary language used in lower-level systems development). We're starting here for a few reasons:\n\n  - The C style will expose more plainly some of the basic fundamentals of ADTs.\n  - More practice with pointers! (spoiler alert, we'll be using pointers)\n  - Additional language features we'll see for C++ style ADTs will naturally build on conventions we define first in the C style.\n\n  <!-- terminate list -->\n\n  But first, let's take a detour to formally acknowledge the `const` keyeword, which has been showing up and will start showing up even more in the near future...\n  \n  <div style=\"position: absolute; bottom: 5px; right: 10px; font-weight: bold;\">Updated Spring 2025</div>\n</div>\n<div markdown=1 class=\"alert alert-warning\">\n  <p>\n  <b>Switching over from live lecture?</b><br />\n  Live lectures usually run a bit behind for the first several lectures and we move some things around. If you attended live lecture 1, but have since switched over to async:\n  </p>\n  <ul>\n    <li>Section 9 and 10 from async lecture 1 related to projects, the autograder, and academic integrity.</li>\n  </ul>\n</div>\n<style>\n  .lec-video {\n    width: 80%;\n    aspect-ratio: 16/9;\n  }\n\n  iframe.lobster-iframe {\n    border: none;\n    width: 80%;\n    height: 450px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n</style>",
  "mk_questions_message": "\n<div style=\"text-align: left\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-house-fill\" viewBox=\"0 0 16 16\">\n  <path d=\"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z\"/>\n  <path d=\"m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z\"/>\n</svg>\n<a style=\"vertical-align: middle;\" href=\"/eecs280-async-lectures\">\n  Table of Contents\n</a>\n<br />\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-file-earmark-slides\" viewBox=\"0 0 16 16\">\n  <path d=\"M5 6a.5.5 0 0 0-.496.438l-.5 4A.5.5 0 0 0 4.5 11h3v2.016c-.863.055-1.5.251-1.5.484 0 .276.895.5 2 .5s2-.224 2-.5c0-.233-.637-.429-1.5-.484V11h3a.5.5 0 0 0 .496-.562l-.5-4A.5.5 0 0 0 11 6H5zm2 3.78V7.22c0-.096.106-.156.19-.106l2.13 1.279a.125.125 0 0 1 0 .214l-2.13 1.28A.125.125 0 0 1 7 9.778z\"/>\n  <path d=\"M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z\"/>\n</svg>\n<a style=\"vertical-align: middle;\" target=\"_blank\" href=\"https://drive.google.com/drive/folders/1I4ZZc3BXyovb-nlMhIRH3tbi9lBqcV4C?usp=sharing\">\n  Slides (Powerpoint, PDF)\n</a>\n<br />\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-github\" viewBox=\"0 0 16 16\">\n<path d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z\"/>\n</svg>\n<a style=\"vertical-align: middle;\" target=\"_blank\" href=\"https://github.com/jamesjuett/eecs280-async-lectures\">\n  Report issues or make suggestions\n</a>\n</div>\n",
  "mk_bottom_message": "You've reached the end of this lecture! Your work on any exercises will be saved if you re-open this page in the same web browser.\n\n**Participation Credit**  \nMake sure to sign in to the page, complete each of the exercises, and **double check** the participation indicator at the top left of this page to ensure you've earned credit.",
  "mk_download_message": "Export your exercise answers to use with another computer or browser.",
  "mk_saver_message": "Your work on exercises is **automatically** saved in your web browser's local storage. That means you don't need to do anything to save your work as long as:\n- You use the same computer\n- You use the same web browser\n- You don't use incognito or private browsing (which disables local storage)\n\nTo transfer answers between computers or browsers, use the import/export options below.",
  "assets_dir": "/home/jjuett/eecs280/async-lectures/lectures/lecture05/assets",
  "allow_clientside_content": true,
  "sections": [
    {
      "section_id": "section_05_01",
      "title": "The `const` Keyword",
      "mk_description": "The `const` keyword is a _type qualifier_ that we can add to declarations to tell the compiler that we don't intend for some value to change or be changeable. For it's part, the compiler then double checks for us that we don't accidentally try to do this and gives an error if we do!\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/YDLOgHq68W8\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />",
      "questions": [
        {
          "question_id": "lec_const_basics",
          "title": "The `const` Keyword",
          "points": 7,
          "mk_description": "",
          "response": {
            "kind": "fill_in_the_blank",
            "content": "Provided the declarations below, which of the following assignments cause a compiler error due to a violation of `const`? (Write \"ok\" or \"error\".)\n\n```cpp\nint x = 3;\nconst int y = x;\nconst int * ptr1 = &x;\nint * const ptr2 = &x;\nconst int &ref = x;\n```\n\n_BLANK_______ `y = 5;`\n\n_BLANK_______ `*ptr1 = 5;`\n\n_BLANK_______ `ptr1 = &y;`\n\n_BLANK_______ `*ptr2 = 5;`\n\n_BLANK_______ `ptr2 = &x;`\n\n_BLANK_______ `ref = 5;`\n\n_BLANK_______ `x = 5;`",
            "sample_solution": [
              "error",
              "error",
              "ok",
              "ok",
              "error",
              "error",
              "ok"
            ],
            "default_grader": {
              "grader_kind": "manual_regex_fill_in_the_blank",
              "rubric": [
                {
                  "blankIndex": 1,
                  "title": "Box 1",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "error|illegal|not.*legal|not.*allowed|wrong",
                          "flags": "i"
                        }
                      },
                      "explanation": "Correct!",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".",
                          "flags": "i"
                        }
                      },
                      "explanation": "The compiler will not allow it. Answer = \"error\".",
                      "points": 0
                    }
                  ]
                },
                {
                  "blankIndex": 2,
                  "title": "Box 2",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "error|illegal|not.*legal|not.*allowed|wrong",
                          "flags": "i"
                        }
                      },
                      "explanation": "Correct!",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".",
                          "flags": "i"
                        }
                      },
                      "explanation": "The compiler will not allow it. Answer = \"error\".",
                      "points": 0
                    }
                  ]
                },
                {
                  "blankIndex": 3,
                  "title": "Box 3",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "ok|allowed|legal",
                          "flags": "i"
                        }
                      },
                      "explanation": "Correct!",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".",
                          "flags": "i"
                        }
                      },
                      "explanation": "The compiler will allow it. Answer = \"ok\".",
                      "points": 0
                    }
                  ]
                },
                {
                  "blankIndex": 4,
                  "title": "Box 4",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "ok|allowed|legal",
                          "flags": "i"
                        }
                      },
                      "explanation": "Correct!",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".",
                          "flags": "i"
                        }
                      },
                      "explanation": "The compiler will allow it. Answer = \"ok\".",
                      "points": 0
                    }
                  ]
                },
                {
                  "blankIndex": 5,
                  "title": "Box 5",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "error|illegal|not.*legal|not.*allowed|wrong",
                          "flags": "i"
                        }
                      },
                      "explanation": "Correct!",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".",
                          "flags": "i"
                        }
                      },
                      "explanation": "The compiler will not allow it. Answer = \"error\".",
                      "points": 0
                    }
                  ]
                },
                {
                  "blankIndex": 6,
                  "title": "Box 6",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "error|illegal|not.*legal|not.*allowed|wrong",
                          "flags": "i"
                        }
                      },
                      "explanation": "Correct!",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".",
                          "flags": "i"
                        }
                      },
                      "explanation": "The compiler will not allow it. Answer = \"error\".",
                      "points": 0
                    }
                  ]
                },
                {
                  "blankIndex": 7,
                  "title": "Box 7",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "ok|allowed|legal",
                          "flags": "i"
                        }
                      },
                      "explanation": "Correct!",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".",
                          "flags": "i"
                        }
                      },
                      "explanation": "The compiler will allow it. Answer = \"ok\".",
                      "points": 0
                    }
                  ]
                }
              ]
            }
          },
          "verifier": {
            "verifier_kind": "full_credit"
          },
          "mk_postscript": "<hr />\nYou're welcome to check your solution with this **walkthrough** video:\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/8EwC3-wOLJs\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />"
        }
      ]
    },
    {
      "section_id": "section_05_02",
      "title": "`const` Conversions",
      "mk_description": "The compiler also needs to decide where implicit conversions involving `const` should be allowed. The motivating principle is that we should never leave the program \"less safe\" than it was before in terms of protecting `const` objects. Let's take a look at a few examples...\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/1QwpORzTRYg\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />\n\nPerhaps the most important place these rules are realized is in function call parameters as a part of interface specification. Following the rules above, the compiler will only allow a function to be called on a `const` object if the parameters also include the necessary `const` qualification to continue protecting that object. Essentially, only functions that \"promise\" not to change their parameters are allowed to be called on `const` objects/variables.\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/_wM0-4zYah8\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />",
      "questions": [
        {
          "question_id": "lec_const_function_parameters",
          "title": "`const` in Function Parameters",
          "points": 1,
          "mk_description": "",
          "response": {
            "kind": "fill_in_the_blank",
            "content": "Consider these function signatures and some variables declared in a `main()` function.\n\nOne of the function calls in `main()` below is \"sus\" (i.e. suspicious), in that it would put potentially put `const` objects at risk if the compiler allowed it. Can you find which one?\n\n```cpp\nvoid teal(const int *a);\nvoid red(int &a);\nvoid purple(int a);\n\nint main() {\n  const int x = 10;\n  int y = 10;\n\n  teal(&x);\n  red(x);\n  purple(x);\n\n  teal(&y);\n  red(y);\n  purple(y);\n\n}\n```\n\nFor which function call does the compiler produce an error? Briefly explain why.\n\n[[BOX\n\n]]",
            "sample_solution": [
              "The compiler will prohibit the call to red(x) since the parameter is pass-by-reference and does not maintain the const. If the call were allowed, the implementation of red could then potentially change the value of x, which was supposed to be const."
            ],
            "default_grader": {
              "grader_kind": "manual_regex_fill_in_the_blank",
              "rubric": [
                {
                  "blankIndex": 1,
                  "title": "Box 1",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "red.*x|red.*(first|1st)|x.*red|(first|1st).*red",
                          "flags": "i"
                        }
                      },
                      "explanation": "Correct!",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "red.*(arr|array).*1|red.*(first|1st).*arr|(arr|array).*1.*red|(first|1st).*arr.*red",
                          "flags": "i"
                        }
                      },
                      "explanation": "Correct!",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "red",
                          "flags": "i"
                        }
                      },
                      "explanation": "Only the call to `red(x)` produces an error, `red(y)` is ok. (To receive credit, your answer needs to contain text similar to `red(x)`).",
                      "points": 0
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "purple|teal|y",
                          "flags": "i"
                        }
                      },
                      "explanation": "All calls except `red(x)` are ok. Check the sample solution for details.",
                      "points": 0
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".{15,}",
                          "flags": "i"
                        }
                      },
                      "explanation": "The call to `red(x)` produces an error. Make sure your answer mentions this call specifically.",
                      "points": 0
                    }
                  ]
                }
              ]
            }
          },
          "verifier": {
            "verifier_kind": "full_credit"
          },
          "mk_postscript": "<hr />\n<details markdown=\"1\">\n  <summary>Sample solution...</summary>\n  The compiler will prohibit the call to `red(x)` since the parameter is pass-by-reference and does not maintain the const. If the call were allowed, the implementation of red could then potentially change the value of `x`, which was supposed to be const.\n</details>"
        }
      ]
    },
    {
      "section_id": "section_05_03",
      "title": "Intro to `struct`s",
      "mk_description": "Now, back to our main event... defining and using compound objects.\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/BiKWgQwhCjI\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />\n\nTo recap the fundamentals:\n- We can define a new compound object _type_ via a **struct definition** (e.g. `Person`).\n- The `struct` definition contains **member variable declarations**. (e.g. what components does a `Person` have?)\n- We define objects as **instances** of that type and use them in the program.\n- Individual members are accessed via the `.` operator (also called the \"**member access operator**\").\n\nIf you've got **a `struct` object that is const-qualified**, that forbids assignment to the struct as a whole and also forbids assignment to its individual members. That fits with the idea of `const` as \"this shouldn't change\".\n\nFinally, we can **work with structs via pointers**. If you're doing that, the syntax for member access changes. For example, assume `obj` is a `Person` object and `ptr` is a `Person*` pointer that points to that object. Then you would access the person's age as either:\n- `obj.age`\n- `ptr->age`\n\nUse the `.` for objects and the `->` for pointers.",
      "questions": [
        {
          "question_id": "lec_struct_practice",
          "title": "Exercise: Practice with `structs`",
          "points": 1,
          "mk_description": "Complete each of the tasks described in the comments.",
          "response": {
            "kind": "iframe",
            "src": "assets/struct_basics.html",
            "element_class": "lobster-iframe",
            "element_style": "height: 850px;",
            "default_grader": {
              "grader_kind": "standard_iframe",
              "rubric": [
                {
                  "points": 1,
                  "description": "Exercise must be complete.",
                  "property": "complete",
                  "value": true
                }
              ]
            }
          },
          "verifier": {
            "verifier_kind": "full_credit"
          },
          "mk_postscript": "<hr />\n<details>\n  <summary>Sample solution...</summary>\n  ```cpp\n  #include <iostream>\n  #include <string>\n  using namespace std;\n\n  // Task 1: Define a struct called \"Sandwich\" with the members listed below.\n  //         Use the names given and choose an appropriate type for each.\n  //  \"name\"    A name, e.g. \"Reuben\", \"Tofu Bánh mì\", \"Chicken Shawarma\"\n  //  \"is_veg\"  A true/false value indicating whether the sandwich is vegetarian\n  //  \"price\"   The cost to buy the sandiwch, e.g. 7.99\n  struct Sandwich {\n    string name;\n    bool is_veg;\n    double price;\n  };\n\n  int main() {\n    // Task 2: Define and initialize a Sandwich variable as described below:\n    // - You may name the variable whatever you like.\n    // - The variable should be declared as const.\n    // - Use the \"= {}\" notation to give each member a value.\n    const Sandwich s = {\"Falafel\", true, 7.50};\n\n    // Task 3: Create a pointer variable pointing to that Sandwich.\n    const Sandwich *ptr = &s;\n\n    // Task 4: Use the -> operator to print the name of the sandwich.\n    cout << ptr->name << endl;\n  }\n  ```\n</details>"
        }
      ]
    },
    {
      "section_id": "section_05_04",
      "title": "`struct`s and Functions",
      "mk_description": "We'll want to package up complex operations on `struct`s into functions to form abstractions. Let's take a look...\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/IUSHt787vJc\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />\n\nHere's a written version of the flowchart in the video, for quick reference:\n- If you need to modify the original object, use **pass-by-pointer** or **pass-by-reference**.\n- If you don't modify the original object, use **pass-by-pointer-to-const** or **pass-by-reference-to-const**. This protects against accidental modification but more importantly also ensures your function can actually be called on const objects.\n- Only use **pass-by-value** for primitive objects (e.g. `int`, `double`, etc.) or very small compound objects. If the objects are large (e.g. `string`, `vector`, your own custom `struct`s, etc.), pass-by-value makes an expensive and unnecessary copy.",
      "questions": [
        {
          "question_id": "lec_person_birthday",
          "title": "Exercise: `struct`s and Functions",
          "points": 4,
          "mk_description": "Each of the following implementations of `Person_birthday()` has a problem - some will not compile while others will run but ultimately not work as expected. Describe what the problem is and one way to fix it.",
          "response": {
            "kind": "fill_in_the_blank",
            "content": "\n<table style=\"width: 100%; border: none;\">\n  <tr>\n    <td style=\"width: 350px; padding-right: 15px;\">\n    <div markdown=\"1\">\n      \n```cpp\n// Version 1\nvoid Person_birthday(const Person *p) {\n  ++p->age;\n}\n```\n    </div>\n    </td>\n    <td>\n    <div>\n      [[BOX\n      \n      \n      \n      \n      ]]\n    </div>\n    </td>\n  </tr>\n  <tr>\n    <td style=\"width: 350px; padding-right: 15px;\">\n    <div markdown=\"1\">\n      \n```cpp\n// Version 2\nvoid Person_birthday(Person p) {\n  ++p.age;\n}\n```\n    </div>\n    </td>\n    <td>\n    <div>\n      [[BOX\n      \n      \n      \n      \n      ]]\n    </div>\n    </td>\n  </tr>\n  <tr>\n    <td style=\"width: 350px; padding-right: 15px;\">\n    <div markdown=\"1\">\n      \n```cpp\n// Version 3\nvoid Person_birthday(Person *p) {\n  *(p.age)++;\n}\n```\n    </div>\n    </td>\n    <td>\n    <div>\n      [[BOX\n      \n      \n      \n      \n      ]]\n    </div>\n    </td>\n  </tr>\n  \n  <tr>\n    <td style=\"width: 350px; padding-right: 15px;\">\n    <div markdown=\"1\">\n      \n```cpp\n// Version 4\nvoid Person_birthday(Person &p) {\n  ++p->age;\n}\n```\n    </div>\n    </td>\n    <td>\n    <div>\n      [[BOX\n      \n      \n      \n      \n      ]]\n    </div>\n    </td>\n  </tr>\n</table>\n            ",
            "default_grader": {
              "grader_kind": "manual_regex_fill_in_the_blank",
              "rubric": [
                {
                  "blankIndex": 1,
                  "title": "Box 1",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".{10,}",
                          "flags": "i"
                        }
                      },
                      "explanation": "This is just graded for completion. The comments in the sample solution describe the problem with each.",
                      "points": 1
                    }
                  ]
                },
                {
                  "blankIndex": 2,
                  "title": "Box 2",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".{10,}",
                          "flags": "i"
                        }
                      },
                      "explanation": "This is just graded for completion. The comments in the sample solution describe the problem with each.",
                      "points": 1
                    }
                  ]
                },
                {
                  "blankIndex": 3,
                  "title": "Box 3",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".{10,}",
                          "flags": "i"
                        }
                      },
                      "explanation": "This is just graded for completion. The comments in the sample solution describe the problem with each.",
                      "points": 1
                    }
                  ]
                },
                {
                  "blankIndex": 4,
                  "title": "Box 4",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": ".{10,}",
                          "flags": "i"
                        }
                      },
                      "explanation": "This is just graded for completion. The comments in the sample solution describe the problem with each.",
                      "points": 1
                    }
                  ]
                }
              ]
            }
          },
          "verifier": {
            "verifier_kind": "full_credit"
          },
          "mk_postscript": "<hr />\n<details>\n  <summary>Sample solution...</summary>\n  \n  ```cpp\n  // Version 1\n  // There shouldn't be a const in the parameter,\n  // since this function IS intended to change\n  // the Person it's called on.\n  void Person_birthday(const Person *p) {\n    ++p->age;\n  }\n  ```\n\n  ```cpp\n  // Version 2\n  // The pass-by-value parameter should be pass-by-reference,\n  // otherwise, we can't adjust the original Person's age.\n  void Person_birthday(Person p) {\n    ++p.age;\n  }\n  ```\n\n  ```cpp\n  // Version 3\n  // The parentheses here are misplaced. They need to be\n  // placed as (*p).age++, otherwise the compiler attempts\n  // to do the ++ before the *, which won't work.\n  void Person_birthday(Person *p) {\n    *(p.age)++;\n  }\n  ```\n\n  ```cpp\n  // Version 4\n  // The -> operator can be used as a convenient shorthand\n  // for member variable access through a pointer, but not\n  // through a reference. For a reference, just use the .\n  // operator directly like: ++p.age\n  void Person_birthday(Person &p) {\n    ++p->age;\n  }\n  ```\n</details>"
        }
      ]
    },
    {
      "section_id": "section_05_05",
      "title": "C-Style ADTs",
      "mk_description": "Structs form the foundation of ADTs in C, acting as a **data representation** that allows us to model heterogeneous real-world objects. What makes a full ADT is the introduction of associated **behaviors** (i.e. functions) as well as plain **data**. We implement these behaviors as associated functions, which operate on an ADT struct via a pointer parameter.\n\nHere's some details:\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/tyO29QSsV3g\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />",
      "questions": [
        {
          "question_id": "lec07_triangle_scale",
          "title": "Exercise: `Triangle_scale()`",
          "points": 5,
          "mk_description": "Let's say we want to add a function to scale a triangle by a given factor. Here's an example:\n\n```cpp\nstruct Triangle {\n  double a, b, c;\n};\n\nint main() {\n  Triangle t1 = { 2, 2, 2 };\n  cout << Triangle_perimeter(&t1) << endl; // prints 6\n  \n  Triangle_scale(&t1, 2); // Scale up by a factor of 2\n  \n  cout << Triangle_perimeter(&t1) << endl; // prints 12\n}\n```\n\nWhich of the implementations of `Triangle_scale()` below are correct? Write **\"correct\"** or **\"incorrect\"**. For each that is not correct, explain what's wrong with it.",
          "response": {
            "kind": "fill_in_the_blank",
            "content": "\n<table style=\"width: 100%; border: none;\">\n  <tr>\n    <td style=\"width: 350px; padding-right: 15px;\">\n    <div markdown=\"1\">\n      \n```cpp\n// Implementation #1\nvoid Triangle_scale(const Triangle *tri, double s) {\n  tri->a *= s;\n  tri->b *= s;\n  tri->c *= s;\n}\n```\n    </div>\n    </td>\n    <td>\n    <div>\n      [[BOX\n      \n      \n      \n      \n      ]]\n    </div>\n    </td>\n  </tr>\n  <tr>\n    <td style=\"width: 350px; padding-right: 15px;\">\n    <div markdown=\"1\">\n      \n```cpp\n// Implementation #2\nvoid Triangle_scale(Triangle *tri, double s) {\n  a *= s;\n  b *= s;\n  c *= s;\n}\n```\n    </div>\n    </td>\n    <td>\n    <div>\n      [[BOX\n      \n      \n      \n      \n      ]]\n    </div>\n    </td>\n  </tr>\n  <tr>\n    <td style=\"width: 350px; padding-right: 15px;\">\n    <div markdown=\"1\">\n      \n```cpp\n// Implementation #3\nvoid Triangle_scale(double s) {\n  t1.a *= s;\n  t1.b *= s;\n  t1.c *= s;\n}\n```\n    </div>\n    </td>\n    <td>\n    <div>\n      [[BOX\n      \n      \n      \n      \n      ]]\n    </div>\n    </td>\n  </tr>\n  \n  <tr>\n    <td style=\"width: 350px; padding-right: 15px;\">\n    <div markdown=\"1\">\n      \n```cpp\n// Implementation #4\nvoid Triangle_scale(Triangle *tri, double s) {\n  tri->a *= s;\n  tri->b *= s;\n  tri->c *= s;\n}\n```\n    </div>\n    </td>\n    <td>\n    <div>\n      [[BOX\n      \n      \n      \n      \n      ]]\n    </div>\n    </td>\n  </tr>\n  \n  <tr>\n    <td style=\"width: 350px; padding-right: 15px;\">\n    <div markdown=\"1\">\n      \n```cpp\n// Implementation #5\nvoid Triangle_scale(Triangle tri, double s) {\n  tri.a *= s;\n  tri.b *= s;\n  tri.c *= s;\n}\n```\n    </div>\n    </td>\n    <td>\n    <div>\n      [[BOX\n      \n      \n      \n      \n      ]]\n    </div>\n    </td>\n  </tr>\n</table>\n            ",
            "default_grader": {
              "grader_kind": "manual_regex_fill_in_the_blank",
              "rubric": [
                {
                  "blankIndex": 1,
                  "title": "Box 1",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "incorrect",
                          "flags": "i"
                        }
                      },
                      "explanation": "The implementation is incorrect. The comments in the sample solution give more details.",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "correct",
                          "flags": "i"
                        }
                      },
                      "explanation": "The implementation is incorrect. The comments in the sample solution give more details.",
                      "points": 0
                    }
                  ]
                },
                {
                  "blankIndex": 2,
                  "title": "Box 2",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "incorrect",
                          "flags": "i"
                        }
                      },
                      "explanation": "The implementation is incorrect. The comments in the sample solution give more details.",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "correct",
                          "flags": "i"
                        }
                      },
                      "explanation": "The implementation is incorrect. The comments in the sample solution give more details.",
                      "points": 0
                    }
                  ]
                },
                {
                  "blankIndex": 3,
                  "title": "Box 3",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "incorrect",
                          "flags": "i"
                        }
                      },
                      "explanation": "The implementation is incorrect. The comments in the sample solution give more details.",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "correct",
                          "flags": "i"
                        }
                      },
                      "explanation": "The implementation is incorrect. The comments in the sample solution give more details.",
                      "points": 0
                    }
                  ]
                },
                {
                  "blankIndex": 4,
                  "title": "Box 4",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "incorrect",
                          "flags": "i"
                        }
                      },
                      "explanation": "The implementation is correct. The comments in the sample solution give more details.",
                      "points": 0
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "correct",
                          "flags": "i"
                        }
                      },
                      "explanation": "The implementation is correct. The comments in the sample solution give more details.",
                      "points": 1
                    }
                  ]
                },
                {
                  "blankIndex": 5,
                  "title": "Box 5",
                  "points": 1,
                  "description": "",
                  "patterns": [
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "incorrect",
                          "flags": "i"
                        }
                      },
                      "explanation": "The implementation is incorrect. The comments in the sample solution give more details.",
                      "points": 1
                    },
                    {
                      "pattern": {
                        "examma_ray_serialized_regex": {
                          "source": "correct",
                          "flags": "i"
                        }
                      },
                      "explanation": "The implementation is incorrect. The comments in the sample solution give more details.",
                      "points": 0
                    }
                  ]
                }
              ]
            }
          },
          "verifier": {
            "verifier_kind": "full_credit"
          },
          "mk_postscript": "<hr />\n<details>\n  <summary>Sample solution...</summary>\n  \n  ```cpp\n  // Implementation #1\n  // **Incorrect** - there should not be a const on the Triangle\n  // parameter because the function needs to modify its members\n  void Triangle_scale(const Triangle *tri, double s) {\n    tri->a *= s;\n    tri->b *= s;\n    tri->c *= s;\n  }\n  ```\n\n  ```cpp\n  // Implementation #2\n  // **Incorrect** - the member variables a, b, and c must be\n  // accessed through the pointer tri, e.g. tri->a\n  void Triangle_scale(Triangle *tri, double s) {\n    a *= s;\n    b *= s;\n    c *= s;\n  }\n  ```\n\n  ```cpp\n  // Implementation #3\n  // **Incorrect** - t1 is not in scope for this function.\n  // Instead, a pointer to the triangle to work with should\n  // be passed in to the function (e.g. pointing at t1).\n  void Triangle_scale(double s) {\n    t1.a *= s;\n    t1.b *= s;\n    t1.c *= s;\n  }\n  ```\n\n  ```cpp\n  // Implementation #4\n  // **Correct**\n  void Triangle_scale(Triangle *tri, double s) {\n    tri->a *= s;\n    tri->b *= s;\n    tri->c *= s;\n  }\n  ```\n\n  ```cpp\n  // Implementation #5\n  // **Incorrect** - because the triangle is passed by\n  // value, the scaling modification is made to a copy\n  // and the original triangle remains unchanged\n  void Triangle_scale(Triangle tri, double s) {\n    tri.a *= s;\n    tri.b *= s;\n    tri.c *= s;\n  }\n  ```\n</details>"
        }
      ]
    },
    {
      "section_id": "section_05_06",
      "title": "ADT Initialization and Representation Invariants",
      "mk_description": "An essential component of proper ADT design is the use of **representation invariants** to express conditions that differentiate valid data (e.g. a Triangle with sides 3, 4, and 5) from invalid, nonsense values (e.g. one of the side lengths is -10).\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/cvtrJPdnZsY\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />\n\nThere are two main perspectives on representation invariants when you're implementing code:\n1. There's a responsibility to ensure the invariants are followed and aren't broken by bad code (e.g. don't allow creating an invalid `Triangle` with negative side lengths).\n2. You may assume the invariants are true when implementing ADT functions, kind of like an implicit `REQUIRES` clause (e.g. when implementing `Triangle_scale()` we don't need to worry about \"what if the sides are negative??\").\n\n\\#1 is a bit of extra work we put in so that we can rely on \\#2.",
      "questions": []
    },
    {
      "section_id": "section_05_07",
      "title": "Interfaces and Implementations",
      "mk_description": "\nJust a few high level comments on the relationship between interfaces and implementations in ADT design...\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/GSjBT7UusRU\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />",
      "questions": []
    },
    {
      "section_id": "section_05_08",
      "title": "Composing ADTs",
      "mk_description": "\nIt's common to build one ADT by using another. A nice example of this is the `Image` ADT from project 2, which is composed of three `Matrix` ADTs that represent the red/green/blue color channels of an image.\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/n6DKUrWNyec\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />",
      "questions": [
        {
          "question_id": "lec_adts_in_project_2",
          "points": 3,
          "mk_description": "Which of the following are true about ADTs in project 2?",
          "response": {
            "kind": "multiple_choice",
            "choices": [
              "The `Image_init()` function implementations should call `Matrix_init()` on each color channel member.",
              "Code you write that is external to the `Matrix` ADT is allowed to directly access the `data` vector in the `Matrix` struct.",
              "The `Matrix` ADT provides a 2D grid as an abstraction, built on top of an internal 1D vector."
            ],
            "multiple": true,
            "sample_solution": [
              0,
              2
            ],
            "default_grader": {
              "grader_kind": "summation_multiple_choice",
              "rubric": [
                {
                  "points": 1,
                  "selected": true
                },
                {
                  "points": 1,
                  "selected": false
                },
                {
                  "points": 1,
                  "selected": true
                }
              ]
            }
          },
          "verifier": {
            "verifier_kind": "full_credit"
          }
        }
      ]
    },
    {
      "section_id": "section_05_09",
      "title": "Function Overloading",
      "mk_description": "In C++ (and some other programming languages), it's allowed to have multiple functions with the same name as long as they have different parameter types. This is called **function overloading**.\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/MC6xIRR8wys\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />",
      "questions": []
    },
    {
      "section_id": "section_05_010",
      "title": "Unit Testing ADTs",
      "mk_description": "Of course, just as we write unit tests for functions (which are the realization of procedural abstractions in our code), we should also write tests for ADTs to ensure that the behavior of their implementation matches with their specified interface.\n\nLet's take a look at this with some examples for testing the `Matrix` ADT, including some specifics for testing C-Style ADTs without breaking their interface.\n\n<div style=\"text-align: center;\">\n  <iframe class=\"lec-video\" src=\"https://www.youtube.com/embed/arLNZZsnZBc\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n<br />",
      "questions": []
    }
  ],
  "exam_id": "sp25_lec_05",
  "credentials_strategy": {
    "strategy": "google_local",
    "client_id": "444801118749-m2g9gl3gvvkh5ru959dmka0lsk94d9uq.apps.googleusercontent.com",
    "auth_endpoint": "https://examma-ray.eecs.umich.edu/public_api/participation/auth/",
    "message": "Sign in with your @umich.edu Google account to earn participation credit for completing embedded exercises."
  },
  "completion": {
    "threshold": 1,
    "tooltip": "",
    "endpoints": {
      "check": "https://examma-ray.eecs.umich.edu/public_api/participation/me/",
      "submit": "https://examma-ray.eecs.umich.edu/public_api/participation/me/"
    },
    "local_deadline": {
      "when": {
        "examma_ray_serialized_datetime": {
          "iso": "2025-05-13T23:59:59.000-04:00",
          "timezone": "America/Detroit"
        }
      },
      "grace_minutes": 5
    }
  }
}